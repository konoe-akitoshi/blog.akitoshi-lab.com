# Border Radius Design

入れ子角丸設計ルールと黄金比による相対角丸システム。

## 黄金比相対角丸システム

### 理論的基盤

**黄金比（φ ≈ 1.618）による美的調和**
```
各階層 = 前階層 × 0.618 (1/φ)
自然界で最も美しい比率による視覚的調和
```

### 数学的美しさの原理

1. **自然界との調和**
   - 黄金比は花びら、貝殻、人体比率に見られる普遍的美の法則
   - 視覚的に最も心地よく感じる比例関係
   - 無意識レベルでの美的認知を促進

2. **階層的調和**
   - 親子関係の視覚的明確化
   - 自然な視線誘導効果
   - 深いネストでも美しい比例関係を維持

3. **認知的一貫性**
   - 予測可能なパターンによる学習効果
   - デザインシステム全体の統一感
   - 開発者とデザイナーの共通理解促進

### 階層レベル定義

```css
/* 黄金比による相対角丸システム */
Level 0 (親):     16px  /* φ⁰ × 16px - 最上位コンテナ */
Level 1 (子):     10px  /* φ⁻¹ × 16px - 主要コンポーネント */
Level 2 (孫):     6px   /* φ⁻² × 16px - 中間要素 */
Level 3 (曾孫):   4px   /* φ⁻³ × 16px - 小要素 */
Level 4 (最小):   2px   /* φ⁻⁴ × 16px - 装飾要素 */
```

### 適用指針

| 階層 | 角丸値 | 適用要素 | 使用例 |
|------|--------|----------|--------|
| 0 | 16px | 最上位コンテナ | ページカード、モーダル、メインパネル |
| 1 | 10px | 主要コンポーネント | カードコンテンツ、セクション |
| 2 | 6px | 中間要素 | ボタン、画像、フォーム要素 |
| 3 | 4px | 小要素 | タグ、バッジ、アイコン背景 |
| 4 | 2px | 装飾要素 | 区切り線、最小装飾 |

### 実装例

```css
/* 黄金比階層システム */
.card-container {
  border-radius: 16px;  /* Level 0 - 親 */
}

.card-container .card-content {
  border-radius: 10px;  /* Level 1 - 子 (16px × 0.618) */
}

.card-content .button {
  border-radius: 6px;   /* Level 2 - 孫 (10px × 0.618) */
}

.button .tag {
  border-radius: 4px;   /* Level 3 - 曾孫 (6px × 0.618) */
}
```

## 従来の入れ子角丸設計ルール

### 基本原則
```
親要素の角丸 > 子要素の角丸
外側 > 内側の関係を保持
黄金比による自然な減衰を推奨
```

### シンプル実装例
```css
/* 親カード */
.card { border-radius: 12px; }

/* 子画像 */
.card img { border-radius: 8px; }

/* 孫要素（タグ等）*/
.card .tag { border-radius: 4px; }
```

## 統合角丸システム

### CSS変数定義
```css
:root {
  /* 黄金比ベース（推奨） */
  --radius-golden-0: 1rem;      /* 16px - Level 0 */
  --radius-golden-1: 0.625rem;  /* 10px - Level 1 */
  --radius-golden-2: 0.375rem;  /* 6px - Level 2 */
  --radius-golden-3: 0.25rem;   /* 4px - Level 3 */
  --radius-golden-4: 0.125rem;  /* 2px - Level 4 */
  
  /* 従来システム（互換性） */
  --radius-xs: 0.25rem;    /* 4px - 最小要素 */
  --radius-sm: 0.375rem;   /* 6px - ボタン・小要素 */
  --radius-base: 0.5rem;   /* 8px - 中要素・画像 */
  --radius-md: 0.625rem;   /* 10px - 大要素 */
  --radius-lg: 0.75rem;    /* 12px - カードコンテナ */
  --radius-xl: 1rem;       /* 16px - 大型カード */
}
```

### 使用ガイドライン

**新規デザイン**: 黄金比システムを優先使用
**既存システム**: 段階的に黄金比システムへ移行
**特殊ケース**: 従来システムとの併用も可

## Tailwind対応

### 推奨クラス（黄金比ベース）
- `rounded-golden-0` = 16px (Level 0)
- `rounded-golden-1` = 10px (Level 1)
- `rounded-golden-2` = 6px (Level 2)
- `rounded-golden-3` = 4px (Level 3)
- `rounded-golden-4` = 2px (Level 4)

### 従来クラス（互換性）
- `rounded` = 4px
- `rounded-md` = 6px
- `rounded-lg` = 8px
- `rounded-xl` = 12px
- `rounded-2xl` = 16px

## 設計哲学

### なぜ黄金比なのか

1. **普遍的美の法則**
   - 古代ギリシャから現代まで続く美の基準
   - 人間の視覚認知に最適化された比率
   - 文化を超えた美的共通認識

2. **数学的一貫性**
   - 計算可能で予測可能なシステム
   - スケーラブルな階層構造
   - 論理的で説明可能なデザイン判断

3. **実用的効果**
   - 視覚的階層の明確化
   - 認知負荷の軽減
   - ブランド統一感の向上

### 適用判断基準

**黄金比システムを使用する場合:**
- 新規デザインコンポーネント
- 複雑な階層構造を持つUI
- ブランド統一感を重視する場面
- 美的品質を最優先する場合

**従来システムを使用する場合:**
- 既存システムとの互換性が必要
- シンプルな構造のUI
- 開発速度を優先する場合
- 段階的移行期間中

## 錯視補正システム

### 視覚的錯覚の理解

**数値的正確性 ≠ 視覚的正確性**
```
同じ角丸値でも、要素サイズが異なると
視覚的な丸みの印象が変わる現象
```

### 二重角丸の錯視現象

1. **サイズ比率による錯視**
   - 小さい要素では同じ角丸値でもより丸く見える
   - 内側要素の角丸が外側より強調されて見える
   - 視覚的な不調和が生じる

2. **比率計算による基本補正**
   ```css
   /* 外側要素: 300px × 24px角丸 */
   曲率 = 24 ÷ 300 = 0.08 (8%)
   
   /* 内側要素: 260px に同じ曲率を適用 */
   内側角丸 = 260 × 0.08 = 20.8px
   ```

3. **錯視補正係数の適用**
   ```css
   /* さらに視覚補正 (0.7~0.8倍) */
   最終角丸 = 20.8px × 0.7 ≈ 14.6px
   ```

### 黄金比 + 錯視補正システム

**理論値と視覚補正値の併用**

```css
/* 理論的黄金比計算 */
--radius-theoretical-1: calc(var(--radius-base) * 0.618);

/* 錯視補正係数 */
--visual-correction-factor: 0.75; /* 0.7~0.8の範囲で調整 */

/* 最終適用値 */
--radius-corrected-1: calc(var(--radius-theoretical-1) * var(--visual-correction-factor));
```

### 補正係数ガイドライン

| 状況 | 補正係数 | 説明 |
|------|----------|------|
| 標準的な入れ子 | 0.75 | 一般的なカード内コンテンツ |
| 深い階層 | 0.7 | 3層以上の深いネスト |
| 小さい要素 | 0.8 | ボタン内のアイコンなど |
| 大きなサイズ差 | 0.65 | 親子のサイズ差が大きい場合 |

### 実践的補正例

```css
/* 300px カードに 24px 角丸 */
.large-card {
  width: 300px;
  border-radius: 24px;
}

/* 理論値: 24px × 0.618 = 14.8px */
/* 補正値: 14.8px × 0.75 = 11.1px ≈ 11px */
.large-card .content {
  width: 260px;
  border-radius: 11px; /* 錯視補正適用 */
}

/* さらに内側の要素 */
/* 理論値: 11px × 0.618 = 6.8px */
/* 補正値: 6.8px × 0.75 = 5.1px ≈ 5px */
.content .button {
  border-radius: 5px; /* 錯視補正適用 */
}
```

### 視覚テストによる最終調整

**補正後の視覚確認ポイント:**

1. **階層の明確性**
   - 親子関係が視覚的に明確か
   - 各レベルの区別がつくか

2. **調和の確認**
   - 全体的なバランスが取れているか
   - 不自然な強調がないか

3. **コンテキスト適応**
   - 背景色との関係で適切か
   - 他の要素との調和が取れているか

### 補正値計算式

```css
/* 黄金比 + 錯視補正の統合システム */
:root {
  --golden-ratio-inverse: 0.618;
  --visual-correction: 0.75;
  
  /* Level 0: 基準値 */
  --radius-level-0: 16px;
  
  /* Level 1: 黄金比 × 錯視補正 */
  --radius-level-1: calc(var(--radius-level-0) * var(--golden-ratio-inverse) * var(--visual-correction));
  /* 16px × 0.618 × 0.75 ≈ 7.4px → 8px */
  
  /* Level 2: 前レベル × 黄金比 × 錯視補正 */
  --radius-level-2: calc(var(--radius-level-1) * var(--golden-ratio-inverse) * var(--visual-correction));
  /* 8px × 0.618 × 0.75 ≈ 3.7px → 4px */
}
```

### 実用的な補正値テーブル

| Level | 理論値 | 補正値 | 実用値 | 用途 |
|-------|--------|--------|--------|------|
| 0 | 16px | - | 16px | 最上位コンテナ |
| 1 | 9.9px | 7.4px | 8px | 主要コンテンツ |
| 2 | 6.1px | 3.7px | 4px | ボタン・小要素 |
| 3 | 3.8px | 2.3px | 2px | 最小装飾 |

## 錯視補正の設計哲学

### 人間中心設計の原則

**「数値的正確性」より「視覚的正確性」**
```
デザインの目的 = 人間にとって心地よい視覚体験
数学的完璧性 ≠ 視覚的完璧性
```

### 錯視補正が必要な理由

1. **人間の視覚特性**
   - 脳は相対的な関係で物を認識
   - 周囲の要素との比較で印象が変化
   - 絶対値ではなく比率で美しさを判断

2. **デザインの完成度**
   - 細かな違和感の積み重ねが全体の品質を左右
   - プロフェッショナルなデザインの差別化要因
   - ユーザー体験の向上に直結

3. **ブランド価値の向上**
   - 視覚的調和による信頼感の醸成
   - 洗練された印象の創出
   - 競合との差別化

### 実践的アプローチ

**段階的補正プロセス:**

1. **理論値の計算**
   ```css
   /* Step 1: 黄金比による理論計算 */
   theoretical-radius = parent-radius × 0.618
   ```

2. **錯視補正の適用**
   ```css
   /* Step 2: 視覚補正係数の適用 */
   corrected-radius = theoretical-radius × 0.75
   ```

3. **視覚テストによる微調整**
   ```css
   /* Step 3: 実際の見た目で最終調整 */
   final-radius = corrected-radius ± adjustment
   ```

4. **コンテキスト適応**
   - 背景色との関係
   - 他の要素との調和
   - 使用場面での最適化

### 補正係数の選択指針

**0.7倍補正**: 深い階層、大きなサイズ差
**0.75倍補正**: 標準的な入れ子関係（推奨）
**0.8倍補正**: 浅い階層、小さな要素

### 品質チェックリスト

**視覚的調和の確認項目:**
- [ ] 親子関係が明確に認識できる
- [ ] 内側要素が過度に丸く見えない
- [ ] 全体的なバランスが取れている
- [ ] 他の要素との調和が保たれている
- [ ] 異なる画面サイズでも調和が維持される

### まとめ

相対角丸システムは、数学的美しさ（黄金比）と人間の視覚特性（錯視補正）を組み合わせることで、理論的根拠と実用性を両立させたデザインシステムです。

**核心原則:**
- 黄金比による数学的調和
- 錯視補正による視覚的正確性
- 人間中心の設計思想
- 継続的な視覚テストと改善

この統合システムにより、美しく機能的で、ユーザーにとって心地よいデザインを実現できます。